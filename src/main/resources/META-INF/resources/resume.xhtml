<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns:ui="jakarta.faces.facelets"
    xmlns:f="jakarta.faces.core"
    xmlns:h="jakarta.faces.html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="crde.persapiens.org"
    xmlns:fn="jakarta.tags.functions"
    template="/layout/template.xhtml">
    <ui:define name="content" >
        <c:crud titleText="Recommendations that you will use, but not used already."
                titleStyleClass="recommendation"
                managedBean="#{recommendationFeedbackResumeCrudMBean}"
                showInsert="false"
                showUpdateActionLink="false"
                dataTableLazy="false"
                showActionLinksColumn="false">
            <ui:define name="listColumns">
                <p:column style="width:2rem">
                    <p:rowToggler/>
                </p:column>

                <p:column responsivePriority="1" headerText="Main Idea" field="recommendation.mainIdea" sortable="true" filterable="false" />
                <p:column responsivePriority="3" headerText="Interviews" field="recommendation.recommendationInterviews.size()" style="width: 110px;" sortable="true" filterable="false" />
                <p:column responsivePriority="3" headerText="Challenges" field="recommendation.links.size()" style="width: 110px;" sortable="true" filterable="false"/>
                <p:column responsivePriority="4" headerText="Theme" field="recommendation.theme" style="width: 125px;" sortable="true" filterable="false" >
                    #{bean.recommendation.theme.value}
                </p:column>

                <p:column responsivePriority="2" 
                          headerText="Known" 
                          field="known"
                          sortable="true"
                          filterable="false"
                          style="width: 80px;" >
                    #{booleanOptions.label(bean.known)}
                </p:column>

                <p:rowExpansion>                
                    <h:panelGrid columns="2" cellpadding="3">
                        <c:label label="Known Comment" />
                        <h:outputText  id="knownComment" value="#{fn:replace(bean.knownComment, '\\n', '&lt;br/&gt;')}" escape="false" />

                        <c:label label="Used Already Comment" />
                        <h:outputText id="usedAlreadyComment" value="#{fn:replace(bean.usedAlreadyComment, '\\n', '&lt;br/&gt;')}" escape="false" />

                        <c:label label="Will Use Comment" />
                        <h:outputText id="willUseComment" value="#{fn:replace(bean.willUseComment, '\\n', '&lt;br/&gt;')}" escape="false" />
                    </h:panelGrid>


                    <p:accordionPanel multiple="true" activeIndex="0,1">
                        <p:tab title="Abstracts">
                            <h:outputText readonly="true" value="#{fn:replace(bean.recommendation.abstracts, '\\n', '&lt;br/&gt;')}" escape="false" />
                        </p:tab>

                        <p:tab title="Interviews Quotes">
                            <h:outputText readonly="true" value="#{fn:replace(bean.recommendation.interviewQuotes, '\\n', '&lt;br/&gt;')}" escape="false" />
                        </p:tab>

                        <p:tab title="Tags">
                            <h:outputText readonly="true" value="#{fn:replace(bean.recommendation.tags, '\\n', '&lt;br/&gt;')}" escape="false" />
                        </p:tab>
                    </p:accordionPanel>
                </p:rowExpansion>
            </ui:define>
        </c:crud>
        
        
        <c:crud crudId="challenge"
                titleText="Challenges that you will mitigate, but not used linked recommendation."
                titleStyleClass="challenge"
                managedBean="#{challengeFeedbackResumeCrudMBean}"
                showInsert="false"
                showUpdateActionLink="false"
                dataTableLazy="false"
                showActionLinksColumn="false">
            <ui:define name="listColumns">
                <p:column style="width:2rem">
                    <p:rowToggler/>
                </p:column>

                <p:column responsivePriority="1" headerText="Main Idea" field="challenge.mainIdea" sortable="true" filterable="false" />
                <p:column responsivePriority="3" headerText="Interviews" field="challenge.challengeInterviews.size()" style="width: 110px;" sortable="true" filterable="false" />
                <p:column responsivePriority="3" headerText="Recommendations" field="challenge.links.size()" style="width: 170px;" sortable="true" filterable="false"/>
                <p:column responsivePriority="4" headerText="Theme" field="challenge.theme" style="width: 125px;" sortable="true" filterable="false" >
                    #{bean.challenge.theme.value}
                </p:column>

                <p:column responsivePriority="2" 
                          headerText="Known" 
                          field="known"
                          sortable="true"
                          filterable="false"
                          style="width: 80px;" >
                    #{booleanOptions.label(bean.known)}
                </p:column>

                <p:rowExpansion>                
                    <h:panelGrid columns="2" cellpadding="3">
                        <c:label id="knownCommentChallenge" label="Known Comment" />
                        <h:outputText value="#{fn:replace(bean.knownComment, '\\n', '&lt;br/&gt;')}" escape="false" />

                        <c:label id="willMitigateCommentChallenge" label="Will Mitigate Comment" />
                        <h:outputText value="#{fn:replace(bean.willMitigateComment, '\\n', '&lt;br/&gt;')}" escape="false" />
                    </h:panelGrid>

                    <p:accordionPanel multiple="true" activeIndex="0,1">
                        <p:tab title="Abstracts">
                            <h:outputText readonly="true" value="#{fn:replace(bean.challenge.abstracts, '\\n', '&lt;br/&gt;')}" escape="false" />
                        </p:tab>

                        <p:tab title="Interviews Quotes">
                            <h:outputText readonly="true" value="#{fn:replace(bean.challenge.interviewQuotes, '\\n', '&lt;br/&gt;')}" escape="false" />
                        </p:tab>

                        <p:tab title="Tags">
                            <h:outputText readonly="true" value="#{fn:replace(bean.challenge.tags, '\\n', '&lt;br/&gt;')}" escape="false" />
                        </p:tab>
                    </p:accordionPanel>
                </p:rowExpansion>
            </ui:define>
        </c:crud>
        
    </ui:define>
</ui:composition>
