<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns:ui="jakarta.faces.facelets"
    xmlns:f="jakarta.faces.core"
    xmlns:h="jakarta.faces.html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="crde.persapiens.org"
    xmlns:d="jakarta.faces.composite/crde"
    xmlns:fn="jakarta.tags.functions"
    template="/layout/template.xhtml">
    <ui:define name="content" >
        <c:crud titleText="Recommendations that you should apply to your course."
                titleStyleClass="recommendation"                
                titleIcon="#{resource['images/ok.png']}"
                managedBean="#{recommendationFeedbackSummaryCrudMBean}"
                showInsert="false"
                showUpdateActionLink="false"
                dataTableLazy="false"
                showActionLinksColumn="true">
            <ui:define name="listColumns">
                <p:column responsivePriority="1" headerText="Main Idea" field="recommendation.mainIdea" sortable="true" filterable="false" />
                <p:column responsivePriority="3" headerText="Interviews" field="recommendation.recommendationInterviews.size()" style="width: 110px;" sortable="true" filterable="false" />
                <p:column responsivePriority="3" headerText="Challenges" field="recommendation.links.size()" style="width: 110px;" sortable="true" filterable="false"/>
                <p:column responsivePriority="4" headerText="Theme" field="recommendation.theme" style="width: 125px;" sortable="true" filterable="false" >
                    #{bean.recommendation.theme.value}
                </p:column>

            </ui:define>
            <ui:define name="detail">
                <d:recommendationDetail crudMBean="#{recommendationFeedbackSummaryCrudMBean}" />

                <h:panelGrid columns="2" cellpadding="3">
                    <c:label label="Used Already Comment" />
                    <h:outputText id="usedAlreadyComment" value="#{fn:replace(recommendationFeedbackSummaryCrudMBean.bean.usedAlreadyComment, '\\n', '&lt;br/&gt;')}" escape="false" />

                    <c:label label="Will Use Comment" />
                    <h:outputText id="willUseComment" value="#{fn:replace(recommendationFeedbackSummaryCrudMBean.bean.willUseComment, '\\n', '&lt;br/&gt;')}" escape="false" />
                </h:panelGrid>

                <p:accordionPanel multiple="true" activeIndex="0" id="linkChallengeFeedbackAccordionPanel">
                    <p:tab title="Challenge Links (#{recommendationFeedbackSummaryCrudMBean.bean.recommendation.links.size()})" titleStyleClass="challenge" >
                        <p:dataTable id="linkDatatable"
                                     widgetVar="linkDatatable"
                                     value="#{recommendationFeedbackSummaryCrudMBean.bean.recommendation.linkSortedByChallengeChallengeInterviewsSizeList}"
                                     var="link"
                                     emptyMessage="Sem Registros"
                                     rows="5"
                                     paginator="true"
                                     rowsPerPageTemplate="5,10,20,50"
                                     paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                                     paginatorPosition="bottom"
                                     stripedRows="true"
                                     rowIndexVar="rowIdx"
                                     >
                            <p:column responsivePriority="1" headerText="Main Idea" field="challenge.mainIdea" sortable="true" filterable="false" />
                            <p:column responsivePriority="3" headerText="Interviews" field="challenge.challengeInterviews.size()" style="width: 70px;" sortable="true" filterable="false" />
                            <p:column responsivePriority="3" headerText="Recommendations" field="challenge.links.size()" style="width: 130px;" sortable="true" filterable="false" />
                            <p:column responsivePriority="4" headerText="Theme" field="challenge.theme" style="width: 125px;" sortable="true" filterable="false" >
                                #{link.challenge.theme.value}
                            </p:column>

                        </p:dataTable>
                    </p:tab>
                </p:accordionPanel>
            </ui:define>
        </c:crud>
        
        
        <c:crud crudId="challenge"
                titleText="Challenges that you will mitigate, but you use no linked recommendation."
                titleStyleClass="challenge"
                titleIcon="#{resource['images/warning.png']}" 
                managedBean="#{challengeFeedbackSummaryCrudMBean}"
                showInsert="false"
                showUpdateActionLink="false"
                dataTableLazy="false"
                showActionLinksColumn="true">
            <ui:define name="listColumns">
                <p:column responsivePriority="1" headerText="Main Idea" field="challenge.mainIdea" sortable="true" filterable="false" />
                <p:column responsivePriority="3" headerText="Interviews" field="challenge.challengeInterviews.size()" style="width: 110px;" sortable="true" filterable="false" />
                <p:column responsivePriority="3" headerText="Recommendations" field="challenge.links.size()" style="width: 170px;" sortable="true" filterable="false"/>
                <p:column responsivePriority="4" headerText="Theme" field="challenge.theme" style="width: 125px;" sortable="true" filterable="false" >
                    #{bean.challenge.theme.value}
                </p:column>
            </ui:define>
            <ui:define name="detail">
                <d:challengeDetail crudMBean="#{challengeFeedbackSummaryCrudMBean}" />
                
                <h:panelGrid columns="2" cellpadding="3">
                    <c:label id="willMitigateCommentChallenge" label="Will Mitigate Comment" />
                    <h:outputText value="#{fn:replace(challengeFeedbackSummaryCrudMBean.bean.willMitigateComment, '\\n', '&lt;br/&gt;')}" escape="false" />
                </h:panelGrid>

                <p:accordionPanel multiple="true" activeIndex="0" id="linkRecommendationFeedbackAccordionPanel">
                    <p:tab title="Recommendation Links (#{challengeFeedbackSummaryCrudMBean.bean.challenge.links.size()})" titleStyleClass="recommendation" >
                        <p:dataTable id="linkDatatable"
                                     widgetVar="linkDatatable"
                                     value="#{challengeFeedbackSummaryCrudMBean.bean.challenge.linkSortedByRecommendationRecommendationInterviewsSizeList}"
                                     var="link"
                                     emptyMessage="Sem Registros"
                                     rows="5"
                                     paginator="true"
                                     rowsPerPageTemplate="5,10,20,50"
                                     paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}"
                                     paginatorPosition="bottom"
                                     stripedRows="true"
                                     rowIndexVar="rowIdx"
                                     >
                            <p:column responsivePriority="1" headerText="Main Idea" field="recommendation.mainIdea" sortable="true" filterable="false" />
                            <p:column responsivePriority="3" headerText="Interviews" field="recommendation.recommendationInterviews.size()" style="width: 70px;" sortable="true" filterable="false" />
                            <p:column responsivePriority="3" headerText="Challenges" field="recommendation.links.size()" style="width: 80px;" sortable="true" filterable="false"/>
                            <p:column responsivePriority="4" headerText="Theme" field="link.recommendation.theme" style="width: 125px;" sortable="true" filterable="false" >
                                #{link.recommendation.theme.value}
                            </p:column>

                        </p:dataTable>
                    </p:tab>
                </p:accordionPanel>
            </ui:define>
        </c:crud>
        
    </ui:define>
</ui:composition>
