<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
    xmlns:cc="jakarta.faces.composite"
    xmlns:h="jakarta.faces.html"
    xmlns:fn="jakarta.tags.functions"
    xmlns:c="improve.persapiens.org"
    xmlns:d="jakarta.faces.composite/improve"
    xmlns:p="http://primefaces.org/ui">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="crudMBean"/>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <h:panelGrid columns="2" cellpadding="3">
            <c:text readonly="true" value="#{cc.attrs.crudMBean.bean.challenge.mainIdea}" label="Main Idea" id="mainIdea"/>
            <c:text readonly="true" value="#{cc.attrs.crudMBean.bean.challenge.theme.value}" label="Theme" id="theme"/>
        </h:panelGrid>

        <p:accordionPanel multiple="true" activeIndex="-1">
            <p:tab titletip="Click to show / hide the interviews Resumes and Quotes of this challenge"
                   title="Interviews Resumes and Quotes (#{cc.attrs.crudMBean.bean.challenge.challengeInterviews.size()})">                
                <p:dataTable var="challengeInterview" value="#{cc.attrs.crudMBean.bean.challenge.challengeInterviews}"
                             rows="3" stripedRows="true" paginator="true" paginatorPosition="bottom"
                             rowsPerPageTemplate='3,4,5,10'
                             paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {CurrentPageReport}">
                    <p:column headerText="P" field="interview.interviewee" style="width: 35px;" filterable="false" sortable="false"/>
                    <p:column headerText="Resume">
                        <h:outputText readonly="true" value="#{fn:replace(challengeInterview.resume, '\\n', '&lt;br/&gt;')}" escape="false" />
                    </p:column>
                    <p:column headerText="Quote">
                        <h:outputText readonly="true" value="#{fn:replace(challengeInterview.quote, '\\n', '&lt;br/&gt;')}" escape="false" />
                    </p:column>
                </p:dataTable>                
            </p:tab>

            <p:tab titletip="Click to show / hide the tags of this challenge"
                   title="Tags (#{cc.attrs.crudMBean.bean.challenge.challengeTags.size()})">
                <h:outputText readonly="true" value="#{fn:replace(cc.attrs.crudMBean.bean.challenge.tags, '\\n', '&lt;br/&gt;')}" escape="false" />
            </p:tab>
        </p:accordionPanel>        
    </cc:implementation>
</html>